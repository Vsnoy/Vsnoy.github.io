# 网络

## HTTP 状态码

- 2XX 成功
  - 204
    没有内容。服务器成功处理请求，但没有返回任何内容。
  - 206
    部分内容。服务器成功处理了部分 GET 请求。
- 3XX 重定向
  - 301
    永久性重定向
  - 302
    临时性重定向
  - 303
    查看其他。请求的资源可以在另一个 URI 上找到。
  - 304
    未修改。请求的资源未修改。
- 4XX 客户端错误
  - 400
    请求报文存在语法错误
  - 401
    请求需要身份验证
  - 403
    请求被服务器拒绝
- 5XX 服务器错误
  - 500
    服务器内部错误
  - 503
    服务器繁忙

## HTTP1.0 和 1.1 区别

- HTTP/1.1 使用持久连接
- HTTP/1.1 节约带宽
- HTTP/1.1 新增 host 字段
- HTTP/1.1 新增了很多请求方法
- HTTP/1.1 新增了更多缓存控制策略

## HTTP1.1 和 2.0 区别

- HTTP/2 采用二进制格式而非文本格式
- HTTP/2 实现了多路复用，而非有序并阻塞的
- HTTP/2 实现了头信息压缩，降低了开销
- HTTP/2 允许服务器未经请求，主动向客户端发送资源

## HTTP 和 HTTPS 协议区别

- HTTP 协议端口是 80；HTTPS 的协议端口是 443
- HTTP 协议不需要 CA 证书；HTTPS 协议需要，费用较高
- HTTP 协议信息是明文传输的；HTTPS 使用 SSL 加密传输

## 常见 HTTP 请求方法

- Get：向服务器获取数据
- Post：将实体提交到指定的资源，通常会造成服务器资源的修改
- Put：上传文件，更新数据
- Delete：删除服务器上的对象
- Head：获取报文首部，与 GET 相比，不返回报文主体部分
- Options：询问支持的请求方法，用来跨域请求
- Connect：要求在与代理服务器通信时建立隧道，使用隧道进行 TCP 通信
- Trace：回显服务器收到的请求，主要⽤于测试或诊断。

## HTTP 请求报文是什么样的

请求报文由三部分组成：

- 请求行

  > 由请求方法、URL、协议版本三个字段构成。
  >
  > 形如：GET /index.html HTTP/1.1

- 请求头部

  > 请求头部由关键字/值对组成，每行⼀对，关键字和值⽤英⽂冒号分隔 。
  >
  > 常见请求头属性如下：
  >
  > - Host：请求的服务器地址
  > - Connection：指定连接类型
  > - User-Agent：发生请求的应用程序名称

- 请求体

  > 存放 Post、Put 等请求携带的数据

## HTTP 响应报文是什么样的

响应报文由三部分组成：

- 响应行

  > 由协议版本、状态码、描述三个字段组成。
  >
  > 形如：HTTP/1.1 200 OK

- 响应头

  > 响应头部由关键字/值对组成，每行⼀对，关键字和值⽤英⽂冒号分隔 。
  >
  > 常见响应头属性如下：
  >
  > - Server：服务器应用程序软件的名称和版本
  > - Content-Type：响应正文的类型
  > - Content-Length：响应正文的长度

- 响应体

  > 服务器响应的数据 

## GET 和 POST 请求的区别

- 作用不同  
  GET 通常用来获取数据，POST 则用来提交数据

- 传输方式不同  
  GET 通过 URL 传输数据，POST 则通过请求体传输数据

- 安全性不同  
  POST 的数据因为在请求体内，所以有⼀定的安全性保证，⽽GET 的数据在 URL 中，通过历史记录，缓存很容易查到数据信息

- 请求长度不同  
  GET 请求在 URL 中传送的参数是有长度限制的，POST 则没有

- GET 无害  
  GET 在浏览器刷新、后退是⽆害的，POST 则会再次提交请求

## PUT 和 POST 请求的区别

- PUT 请求是向服务器端发送数据，从而修改数据的内容，但是不会增加数据的种类等，也就是说无论进行多少次 PUT 操作，其结果并没有不同。（可理解为**更新数据**）
- POST 请求是向服务器端发送数据，该请求会改变数据的种类等资源，它会创建新的内容。（可理解为**创建数据**）

PS：一个栗子是平时贴吧回复的时候，如果网络不好，回帖失败一直点回帖按钮，刷新后会发现回复了好多条一样的帖子，这就是 POST 请求。而使用 PUT 就不会出现这种情况。

## TCP 和 UDP 协议区别

TCP 和 UDP 都是传输层协议，都属于 TCP/IP 协议族：

- TCP，传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议
- UDP，用户数据报协议，是一种无连接的协议

|              | TCP                                              | UDP                                        |
| ------------ | ------------------------------------------------ | ------------------------------------------ |
| 是否连接     | 面向连接                                         | 无连接                                     |
| 是否可靠     | 可靠传输，使用流量控制和拥塞控制                 | 不可靠传输，不使用流量控制和拥塞控制       |
| 连接对象个数 | 只能是一对一通信                                 | 支持一对一，一对多，多对一和多对多交互通信 |
| 传输方式     | 面向字节流                                       | 面向报文                                   |
| 首部开销     | 首部最小 20 字节，最大 60 字节                       | 首部开销小，仅 8 字节                        |
| 适用场景     | 适用于要求可靠传输的应用，例如文件传输、邮件接收 | 适用于实时应用，例如视频会议、网络直播     |

## UDP 协议为什么不可靠

UDP 在传输数据之前不需要先建立连接，远地主机的运输层在接收到 UDP 报文后，不需要确认，提供不可靠交付。总结就以下四点：

- 不保证消息交付：不确认，不重传，无超时
- 不保证交付顺序：不设置包序号，不重排，不会发生队首阻塞
- 不跟踪连接状态：不必建立连接或重启状态机
- 不进行拥塞控制：不内置客户端或网络反馈机制

## TCP 三次握手和四次挥手

![tcp](https://raw.githubusercontent.com/Vsnoy/PicGo/main/VuePress/tcp.png)

```
三次握手：（交朋友流程替换也可）
client：约不约？？？！！！（syn=1）
server：约约约！！！（ack=1，syn=1）
client：好的，我来找你！！！（ack=1）

四次挥手：（毕业流程替换也可）
client：老子要离职！！！（FIN=1）
server：OK，你要离职是吧，我马上给你走程序！程序完了我通知你！！(ACK=1)
server：程序走完了，文件发给你了，你最后确认一下（FIN=1）
client：OK，确认完毕，关机跑路（ACK=1）
```

## 浏览器输入 URL，按下回车后发生了什么

- DNS 解析
- 建立 TCP 连接（三次握手）
- 发送 HTTP 请求
- 服务器处理请求并返回 HTTP 报文
- 浏览器解析渲染页面
  - 解析 HTML，构建 DOM 树
  - 解析 CSS，构建 CSSOM 规则树
  - 合并 DOM 和 CSS 规则树，生成 Render 渲染树
  - 布局 Render 树，包括位置、尺寸信息等等
  - 绘制 Render 树，包括页面像素信息等等
- 断开连接（四次挥手）