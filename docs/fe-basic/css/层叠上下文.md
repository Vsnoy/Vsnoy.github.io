# 层叠上下文

`Stacking Context` ，层叠上下文，是 `CSS` 中用来描述页面中元素在垂直于屏幕方向排列规则而创建出的模型。
层叠上下文中重叠的元素按照一定的规则在垂直方向排列。

## 产生条件

- 根元素 （html 元素）
- 定位元素
  - relative、absolute（z-index 不为 auto）
  - fixed、sticky
- CSS3 属性
  - opacity 属性值小于 1
  - flex 容器的子元素（z-index 不为 auto）
  - grid 容器的子元素（z-index 不为 auto）
  - transform、filter、perspective、clip-path、
    mask、mask-image、mask-border
    属性值不为 none
  - 等等

## 层叠水平  

决定了在同一个层叠上下文中，元素在 z 轴上的显示顺序
  
## 层叠顺序  

在同一层叠上下文中，层叠顺序自下而上依次是：层叠上下文的根、`z-index` 为负、`block` 、`float` 、`inline/inline-block` 、`z-index` 为 `0` 或 `auto` 、`z-index` 为正。
![stacking_context](https://raw.githubusercontent.com/Vsnoy/PicGo/main/VuePress/stacking_context.png)
  
## 层叠准则

- 同一层叠上下文中的元素，按照层叠顺序排列
- 不同层叠上下文中的元素，按层叠水平进行整体排列
- 层叠水平与层叠顺序都相同，在 `DOM` 流中处于后面的元素会覆盖前面的元素